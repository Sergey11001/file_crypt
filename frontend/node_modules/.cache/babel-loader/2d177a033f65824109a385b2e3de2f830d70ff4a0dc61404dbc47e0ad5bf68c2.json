{"ast":null,"code":"import _objectSpread from\"/home/sergey/univer/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useCallback,useState}from'react';import{useDropzone}from'react-dropzone';import{useNavigate}from'react-router-dom';import{encryptFile,encryptWithPublicKey,generateAesKey}from'../utils/crypto';import filesApi from'../api/files';import UserSelector from\"../components/UserSelector\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function UploadFile(){const[file,setFile]=useState(null);const[accessType,setAccessType]=useState('private');const[recipientEmail,setRecipientEmail]=useState('');const[recipientPublicKey,setRecipientPublicKey]=useState(null);const[recipientUuid,setRecipientUuid]=useState(null);const[isLoading,setIsLoading]=useState(false);const[progress,setProgress]=useState(0);const navigate=useNavigate();const onDrop=useCallback(acceptedFiles=>{if(acceptedFiles.length){const selectedFile=acceptedFiles[0];if(selectedFile.size>50*1024*1024){toast.warn('Размер файла превышает лимит в 50 МБ');return;}setFile(selectedFile);setProgress(0);}},[]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,maxFiles:1,accept:{'application/pdf':['.pdf'],'image/*':['.png','.jpg','.jpeg'],'text/plain':['.txt']},disabled:isLoading});const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setProgress(0);try{let symmetricKey=null;let encryptedAesKey=null;if(accessType==='private'||accessType==='specific'){setProgress(5);symmetricKey=await generateAesKey();}if(accessType==='private'||accessType==='specific'){setProgress(15);const publicKeyPem=localStorage.getItem('public_key');if(!publicKeyPem)throw new Error('Public key not found in localStorage');encryptedAesKey=await encryptWithPublicKey(symmetricKey,publicKeyPem);}setProgress(30);const fileToUpload=accessType==='private'||accessType==='specific'?await encryptFile(file,symmetricKey):file;setProgress(50);const formData=new FormData();formData.append('file',fileToUpload,file.name);formData.append('name',file.name);if(accessType==='private'||accessType==='specific'){formData.append('symmetric_key',encryptedAesKey);}setProgress(75);const response=await filesApi.createFile(formData,progressEvent=>{const percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);setProgress(75+percentCompleted*0.25);});if(accessType==='specific'){encryptedAesKey=await encryptWithPublicKey(symmetricKey,recipientPublicKey);await filesApi.shareFile(response.data.file.uuid,{recipient_uuid:recipientUuid,symmetric_key:encryptedAesKey});}setProgress(100);navigate('/storage/my');}catch(err){toast.error('Ошибка загрузки файла.');setProgress(0);}finally{setIsLoading(false);}};const removeFile=()=>{setFile(null);setProgress(0);};return/*#__PURE__*/_jsx(\"div\",{className:\"upload-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"upload-title\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0444\\u0430\\u0439\\u043B\\u0430\"}),/*#__PURE__*/_jsx(\"p\",{className:\"upload-description\",children:accessType==='private'?'Файлы шифруются перед загрузкой. Расшифровать их можете только вы.':accessType==='public'?'Файлы будут доступны любому, у кого есть ссылка.':'Файлы будут зашифрованы для конкретного получателя.'}),/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps()),{},{className:\"dropzone \".concat(isDragActive?'active':'',\" \").concat(file?'has-file':''),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),file?/*#__PURE__*/_jsxs(\"div\",{className:\"file-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"file-icon\",children:file.type.startsWith('image/')?/*#__PURE__*/_jsx(\"i\",{className:\"icon-image\"}):/*#__PURE__*/_jsx(\"i\",{className:\"icon-file\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"file-name\",children:file.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"file-size\",children:[(file.size/1024/1024).toFixed(2),\" MB\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-btn\",onClick:e=>{e.stopPropagation();removeFile();},disabled:isLoading,children:\"\\xD7\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon-upload\"}),/*#__PURE__*/_jsx(\"p\",{className:\"dropzone-text\",children:isDragActive?'Перетащите файл сюда':'Перетащите файл или щелкните, чтобы выбрать'}),/*#__PURE__*/_jsx(\"p\",{className:\"dropzone-hint\",children:\"\\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442: PDF, JPG, PNG, TXT (\\u043C\\u0430\\u043A\\u0441. 50 \\u041C\\u0411)\"})]})]})),/*#__PURE__*/_jsxs(\"div\",{className:\"access-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"access-options\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"access-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"accessType\",value:\"private\",checked:accessType==='private',onChange:()=>setAccessType('private')}),/*#__PURE__*/_jsxs(\"span\",{className:\"access-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon-lock\"}),\" \\u041B\\u0438\\u0447\\u043D\\u043E\\u0435\"]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"access-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"accessType\",value:\"public\",checked:accessType==='public',onChange:()=>setAccessType('public')}),/*#__PURE__*/_jsxs(\"span\",{className:\"access-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon-globe\"}),\" \\u041F\\u0443\\u0431\\u043B\\u0438\\u0447\\u043D\\u044B\\u0439 (\\u043B\\u044E\\u0431\\u043E\\u0439, \\u0443 \\u043A\\u043E\\u0433\\u043E \\u0435\\u0441\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0430)\"]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"access-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"accessType\",value:\"specific\",checked:accessType==='specific',onChange:()=>setAccessType('specific')}),/*#__PURE__*/_jsxs(\"span\",{className:\"access-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon-user\"}),\" \\u041A\\u043E\\u043D\\u043A\\u0440\\u0435\\u0442\\u043D\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\"]})]})]}),accessType==='specific'&&/*#__PURE__*/_jsxs(\"div\",{className:\"recipient-section\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(UserSelector,{onUserSelect:user=>{if(user){setRecipientEmail(user.email);setRecipientPublicKey(user.public_key);setRecipientUuid(user.uuid);}else{setRecipientEmail('');setRecipientPublicKey(null);setRecipientUuid(null);}}})]})]}),progress>0&&progress<100&&/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(progress,\"%\")}}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[Math.round(progress),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-btn\",onClick:()=>navigate('/storage/my'),disabled:isLoading,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"upload-btn\",onClick:handleSubmit,disabled:!file||isLoading||accessType==='specific'&&!recipientEmail,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon-spinner\"}),accessType==='private'?'Шифрование и загрузка...':'Загрузка...']}):accessType==='private'?'Зашифровать и загрузить':'Загрузить файл'})]})]})});}","map":{"version":3,"names":["useCallback","useState","useDropzone","useNavigate","encryptFile","encryptWithPublicKey","generateAesKey","filesApi","UserSelector","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UploadFile","file","setFile","accessType","setAccessType","recipientEmail","setRecipientEmail","recipientPublicKey","setRecipientPublicKey","recipientUuid","setRecipientUuid","isLoading","setIsLoading","progress","setProgress","navigate","onDrop","acceptedFiles","length","selectedFile","size","warn","getRootProps","getInputProps","isDragActive","maxFiles","accept","disabled","handleSubmit","e","preventDefault","symmetricKey","encryptedAesKey","publicKeyPem","localStorage","getItem","Error","fileToUpload","formData","FormData","append","name","response","createFile","progressEvent","percentCompleted","Math","round","loaded","total","shareFile","data","uuid","recipient_uuid","symmetric_key","err","error","removeFile","className","children","_objectSpread","concat","type","startsWith","toFixed","onClick","stopPropagation","value","checked","onChange","onUserSelect","user","email","public_key","style","width"],"sources":["/home/sergey/univer/frontend/src/pages/UploadFile.jsx"],"sourcesContent":["import {useCallback, useState} from 'react';\nimport {useDropzone} from 'react-dropzone';\nimport {useNavigate} from 'react-router-dom';\nimport {encryptFile, encryptWithPublicKey, generateAesKey,} from '../utils/crypto';\nimport filesApi from '../api/files';\nimport UserSelector from \"../components/UserSelector\";\nimport {toast} from \"react-toastify\";\n\nexport default function UploadFile() {\n    const [file, setFile] = useState(null);\n    const [accessType, setAccessType] = useState('private');\n    const [recipientEmail, setRecipientEmail] = useState('');\n    const [recipientPublicKey, setRecipientPublicKey] = useState(null);\n    const [recipientUuid, setRecipientUuid] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [progress, setProgress] = useState(0);\n    const navigate = useNavigate();\n\n    const onDrop = useCallback((acceptedFiles) => {\n        if (acceptedFiles.length) {\n            const selectedFile = acceptedFiles[0];\n\n            if (selectedFile.size > 50 * 1024 * 1024) {\n                toast.warn('Размер файла превышает лимит в 50 МБ')\n                return;\n            }\n\n            setFile(selectedFile);\n            setProgress(0);\n        }\n    }, []);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n        onDrop,\n        maxFiles: 1,\n        accept: {\n            'application/pdf': ['.pdf'],\n            'image/*': ['.png', '.jpg', '.jpeg'],\n            'text/plain': ['.txt']\n        },\n        disabled: isLoading\n    });\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        setIsLoading(true);\n        setProgress(0);\n\n        try {\n            let symmetricKey = null;\n            let encryptedAesKey = null;\n\n            if (accessType === 'private' || accessType === 'specific') {\n                setProgress(5);\n                symmetricKey = await generateAesKey();\n            }\n\n            if (accessType === 'private' || accessType === 'specific') {\n                setProgress(15);\n                const publicKeyPem = localStorage.getItem('public_key');\n                if (!publicKeyPem) throw new Error('Public key not found in localStorage');\n                encryptedAesKey = await encryptWithPublicKey(symmetricKey, publicKeyPem);\n            }\n\n            setProgress(30);\n            const fileToUpload = accessType === 'private' || accessType === 'specific'\n                ? await encryptFile(file, symmetricKey)\n                : file;\n\n            setProgress(50);\n            const formData = new FormData();\n            formData.append('file', fileToUpload, file.name);\n            formData.append('name', file.name);\n\n            if (accessType === 'private' || accessType === 'specific') {\n                formData.append('symmetric_key', encryptedAesKey);\n            }\n\n            setProgress(75);\n            const response = await filesApi.createFile(formData, (progressEvent) => {\n                const percentCompleted = Math.round(\n                    (progressEvent.loaded * 100) / progressEvent.total\n                );\n                setProgress(75 + percentCompleted * 0.25);\n            });\n\n            if (accessType === 'specific') {\n                encryptedAesKey = await encryptWithPublicKey(symmetricKey, recipientPublicKey);\n                await filesApi.shareFile(response.data.file.uuid, {\n                    recipient_uuid: recipientUuid,\n                    symmetric_key: encryptedAesKey,\n                });\n            }\n\n            setProgress(100);\n            navigate('/storage/my');\n        } catch (err) {\n            toast.error('Ошибка загрузки файла.');\n            setProgress(0);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const removeFile = () => {\n        setFile(null);\n        setProgress(0);\n    };\n\n    return (\n        <div className=\"upload-page\">\n            <div className=\"upload-container\">\n                <h2 className=\"upload-title\">Загрузка файла</h2>\n                <p className=\"upload-description\">\n                    {accessType === 'private'\n                        ? 'Файлы шифруются перед загрузкой. Расшифровать их можете только вы.'\n                        : accessType === 'public'\n                            ? 'Файлы будут доступны любому, у кого есть ссылка.'\n                            : 'Файлы будут зашифрованы для конкретного получателя.'}\n                </p>\n\n                <div\n                    {...getRootProps()}\n                    className={`dropzone ${isDragActive ? 'active' : ''} ${file ? 'has-file' : ''}`}\n                >\n                    <input {...getInputProps()} />\n                    {file ? (\n                        <div className=\"file-preview\">\n                            <div className=\"file-icon\">\n                                {file.type.startsWith('image/') ? (\n                                    <i className=\"icon-image\"></i>\n                                ) : (\n                                    <i className=\"icon-file\"></i>\n                                )}\n                            </div>\n                            <div className=\"file-info\">\n                                <p className=\"file-name\">{file.name}</p>\n                                <p className=\"file-size\">{(file.size / 1024 / 1024).toFixed(2)} MB</p>\n                            </div>\n                            <button\n                                type=\"button\"\n                                className=\"remove-btn\"\n                                onClick={(e) => {\n                                    e.stopPropagation();\n                                    removeFile();\n                                }}\n                                disabled={isLoading}\n                            >\n                                &times;\n                            </button>\n                        </div>\n                    ) : (\n                        <>\n                            <i className=\"icon-upload\"></i>\n                            <p className=\"dropzone-text\">\n                                {isDragActive ? 'Перетащите файл сюда': 'Перетащите файл или щелкните, чтобы выбрать'}\n                            </p>\n                            <p className=\"dropzone-hint\">Поддерживает: PDF, JPG, PNG, TXT (макс. 50 МБ)</p>\n                        </>\n                    )}\n                </div>\n\n                <div className=\"access-controls\">\n                    <div className=\"access-options\">\n                        <label className=\"access-option\">\n                            <input\n                                type=\"radio\"\n                                name=\"accessType\"\n                                value=\"private\"\n                                checked={accessType === 'private'}\n                                onChange={() => setAccessType('private')}\n                            />\n                            <span className=\"access-label\">\n                <i className=\"icon-lock\"></i> Личное\n              </span>\n                        </label>\n\n                        <label className=\"access-option\">\n                            <input\n                                type=\"radio\"\n                                name=\"accessType\"\n                                value=\"public\"\n                                checked={accessType === 'public'}\n                                onChange={() => setAccessType('public')}\n                            />\n                            <span className=\"access-label\">\n                <i className=\"icon-globe\"></i> Публичный (любой, у кого есть ссылка)\n              </span>\n                        </label>\n\n                        <label className=\"access-option\">\n                            <input\n                                type=\"radio\"\n                                name=\"accessType\"\n                                value=\"specific\"\n                                checked={accessType === 'specific'}\n                                onChange={() => setAccessType('specific')}\n                            />\n                            <span className=\"access-label\">\n                <i className=\"icon-user\"></i> Конкретный пользователь\n              </span>\n                        </label>\n                    </div>\n\n                    {accessType === 'specific' && (\n                        <div className=\"recipient-section\">\n                            <label>Выберите получателя:</label>\n                            <UserSelector\n                                onUserSelect={(user) => {\n                                    if (user) {\n                                        setRecipientEmail(user.email);\n                                        setRecipientPublicKey(user.public_key);\n                                        setRecipientUuid(user.uuid);\n                                    } else {\n                                        setRecipientEmail('');\n                                        setRecipientPublicKey(null);\n                                        setRecipientUuid(null);\n                                    }\n                                }}\n                            />\n                        </div>\n                    )}\n                </div>\n\n                {progress > 0 && progress < 100 && (\n                    <div className=\"progress-bar\">\n                        <div\n                            className=\"progress-fill\"\n                            style={{ width: `${progress}%` }}\n                        ></div>\n                        <span className=\"progress-text\">{Math.round(progress)}%</span>\n                    </div>\n                )}\n\n                <div className=\"actions\">\n                    <button\n                        type=\"button\"\n                        className=\"cancel-btn\"\n                        onClick={() => navigate('/storage/my')}\n                        disabled={isLoading}\n                    >\n                        Отмена\n                    </button>\n                    <button\n                        type=\"submit\"\n                        className=\"upload-btn\"\n                        onClick={handleSubmit}\n                        disabled={!file || isLoading || (accessType === 'specific' && !recipientEmail)}\n                    >\n                        {isLoading ? (\n                            <>\n                                <i className=\"icon-spinner\"></i>\n                                {accessType === 'private' ? 'Шифрование и загрузка...' : 'Загрузка...'}\n                            </>\n                        ) : (\n                            accessType === 'private' ? 'Зашифровать и загрузить' : 'Загрузить файл'\n                        )}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}