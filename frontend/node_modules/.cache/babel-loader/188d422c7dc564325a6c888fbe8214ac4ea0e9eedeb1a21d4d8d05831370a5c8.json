{"ast":null,"code":"var _jsxFileName = \"/home/sergey/WebstormProjects/univer/filecrypt/src/components/FileDownloadRedirect.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport filesApi from '../api/files';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FileDownloadRedirect = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const downloadFile = async () => {\n      try {\n        if (!id) {\n          throw new Error('File ID not specified');\n        }\n        const response = await filesApi.downloadCommonFile(id);\n        const contentDisposition = response.headers['content-disposition'];\n        const fileName = contentDisposition ? contentDisposition.split('filename=')[1] : `file_${id}`;\n        const blob = new Blob([response.data]);\n        saveAs(blob, fileName);\n        navigate(-1);\n      } catch (e) {\n        toast.error('Не удалось загрузить файл');\n        navigate('/storage/my');\n      }\n    };\n    downloadFile();\n  }, [id, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Downloading file...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 16\n  }, this);\n};\n_s(FileDownloadRedirect, \"jBhyhCnGnTynLG86SR547tPdgyU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = FileDownloadRedirect;\nvar _c;\n$RefreshReg$(_c, \"FileDownloadRedirect\");","map":{"version":3,"names":["useEffect","useParams","useNavigate","filesApi","toast","jsxDEV","_jsxDEV","FileDownloadRedirect","_s","id","navigate","downloadFile","Error","response","downloadCommonFile","contentDisposition","headers","fileName","split","blob","Blob","data","saveAs","e","error","children","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/sergey/WebstormProjects/univer/filecrypt/src/components/FileDownloadRedirect.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport filesApi  from '../api/files';\nimport { toast } from 'react-toastify';\n\nexport const FileDownloadRedirect = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const downloadFile = async () => {\n            try {\n                if (!id) {\n                    throw new Error('File ID not specified');\n                }\n\n                const response = await filesApi.downloadCommonFile(id);\n\n                const contentDisposition = response.headers['content-disposition'];\n                const fileName = contentDisposition\n                    ? contentDisposition.split('filename=')[1]\n                    : `file_${id}`;\n\n                const blob = new Blob([response.data]);\n\n                saveAs(blob, fileName);\n\n                navigate(-1);\n                } catch (e) {\n                    toast.error('Не удалось загрузить файл');\n                    navigate('/storage/my');\n                }\n            };\n\n            downloadFile();\n        }, [id, navigate]);\n\n        return <div>Downloading file...</div>;\n    }"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,OAAOC,QAAQ,MAAO,cAAc;AACpC,SAASC,KAAK,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtC,MAAM;IAAEC;EAAG,CAAC,GAAGR,SAAS,CAAC,CAAC;EAC1B,MAAMS,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACZ,MAAMW,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACA,IAAI,CAACF,EAAE,EAAE;UACL,MAAM,IAAIG,KAAK,CAAC,uBAAuB,CAAC;QAC5C;QAEA,MAAMC,QAAQ,GAAG,MAAMV,QAAQ,CAACW,kBAAkB,CAACL,EAAE,CAAC;QAEtD,MAAMM,kBAAkB,GAAGF,QAAQ,CAACG,OAAO,CAAC,qBAAqB,CAAC;QAClE,MAAMC,QAAQ,GAAGF,kBAAkB,GAC7BA,kBAAkB,CAACG,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GACxC,QAAQT,EAAE,EAAE;QAElB,MAAMU,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAEtCC,MAAM,CAACH,IAAI,EAAEF,QAAQ,CAAC;QAEtBP,QAAQ,CAAC,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,OAAOa,CAAC,EAAE;QACRnB,KAAK,CAACoB,KAAK,CAAC,2BAA2B,CAAC;QACxCd,QAAQ,CAAC,aAAa,CAAC;MAC3B;IACJ,CAAC;IAEDC,YAAY,CAAC,CAAC;EAClB,CAAC,EAAE,CAACF,EAAE,EAAEC,QAAQ,CAAC,CAAC;EAElB,oBAAOJ,OAAA;IAAAmB,QAAA,EAAK;EAAmB;IAAAR,QAAA,EAAAS,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AACzC,CAAC;AAAApB,EAAA,CAjCQD,oBAAoB;EAAA,QACdN,SAAS,EACPC,WAAW;AAAA;AAAA2B,EAAA,GAFnBtB,oBAAoB;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}