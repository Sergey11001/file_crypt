{"ast":null,"code":"import{BrowserRouter as Router,Routes,Route,useLocation,Navigate}from'react-router-dom';import SignIn from'./pages/SignIn';import SignUp from'./pages/SignUp';import FileStorage from'./pages/FileStorage';import MyFiles from'./pages/MyFiles';import SharedFiles from'./pages/SharedFiles';import UploadFile from'./pages/UploadFile';import React from\"react\";import useAuthStore from\"./stores/authStore\";import{AppWrapper}from\"./components/AppWrapper\";import{FileDownloadRedirect}from\"./components/FileDownloadRedirect\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProtectedRoute(_ref){let{children}=_ref;const{isAuthenticated,loading}=useAuthStore();const location=useLocation();if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/signin\",state:{from:location},replace:true});}return children;}function App(){return/*#__PURE__*/_jsx(AppWrapper,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/storage\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(FileStorage,{})}),children:[/*#__PURE__*/_jsx(Route,{path:\"my\",element:/*#__PURE__*/_jsx(MyFiles,{})}),/*#__PURE__*/_jsx(Route,{path:\"shared\",element:/*#__PURE__*/_jsx(SharedFiles,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"/upload\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(UploadFile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/file/:id\",element:/*#__PURE__*/_jsx(FileDownloadRedirect,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(SignIn,{})})]})})});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","useLocation","Navigate","SignIn","SignUp","FileStorage","MyFiles","SharedFiles","UploadFile","React","useAuthStore","AppWrapper","FileDownloadRedirect","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","isAuthenticated","loading","location","to","state","from","replace","App","path","element"],"sources":["/home/sergey/univer/frontend/src/App.js"],"sourcesContent":["import {BrowserRouter as Router, Routes, Route, useLocation, Navigate} from 'react-router-dom';\nimport SignIn from './pages/SignIn';\nimport SignUp from './pages/SignUp';\nimport FileStorage from './pages/FileStorage';\nimport MyFiles from './pages/MyFiles';\nimport SharedFiles from './pages/SharedFiles';\nimport UploadFile from './pages/UploadFile';\nimport React from \"react\";\nimport useAuthStore from \"./stores/authStore\";\nimport {AppWrapper} from \"./components/AppWrapper\";\nimport {FileDownloadRedirect} from \"./components/FileDownloadRedirect\";\n\nfunction ProtectedRoute({ children }) {\n    const { isAuthenticated, loading } = useAuthStore();\n    const location = useLocation();\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    if (!isAuthenticated) {\n        return <Navigate to=\"/signin\" state={{ from: location }} replace />;\n    }\n\n    return children;\n}\n\nfunction App() {\n    return (\n                <AppWrapper>\n                    <Router>\n                        <Routes>\n                            <Route path=\"/signin\" element={<SignIn />} />\n                            <Route path=\"/signup\" element={<SignUp />} />\n\n                            <Route path=\"/storage\" element={<ProtectedRoute><FileStorage /></ProtectedRoute>}>\n                                <Route path=\"my\" element={<MyFiles />} />\n                                <Route path=\"shared\" element={<SharedFiles />} />\n                            </Route>\n\n                            <Route path=\"/upload\" element={<ProtectedRoute><UploadFile /></ProtectedRoute>} />\n                            <Route path=\"/file/:id\" element={<FileDownloadRedirect />} />\n                            <Route path=\"*\" element={<SignIn />} />\n                        </Routes>\n                    </Router>\n                </AppWrapper>\n    );\n}\n\nexport default App;"],"mappings":"AAAA,OAAQA,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,WAAW,CAAEC,QAAQ,KAAO,kBAAkB,CAC9F,MAAO,CAAAC,MAAM,KAAM,gBAAgB,CACnC,MAAO,CAAAC,MAAM,KAAM,gBAAgB,CACnC,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CACrC,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,CAAAC,UAAU,KAAM,oBAAoB,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,YAAY,KAAM,oBAAoB,CAC7C,OAAQC,UAAU,KAAO,yBAAyB,CAClD,OAAQC,oBAAoB,KAAO,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvE,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAChC,KAAM,CAAEE,eAAe,CAAEC,OAAQ,CAAC,CAAGX,YAAY,CAAC,CAAC,CACnD,KAAM,CAAAY,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAE9B,GAAIoB,OAAO,CAAE,CACT,mBAAOP,IAAA,QAAAK,QAAA,CAAK,YAAU,CAAK,CAAC,CAChC,CAEA,GAAI,CAACC,eAAe,CAAE,CAClB,mBAAON,IAAA,CAACZ,QAAQ,EAACqB,EAAE,CAAC,SAAS,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEH,QAAS,CAAE,CAACI,OAAO,MAAE,CAAC,CACvE,CAEA,MAAO,CAAAP,QAAQ,CACnB,CAEA,QAAS,CAAAQ,GAAGA,CAAA,CAAG,CACX,mBACYb,IAAA,CAACH,UAAU,EAAAQ,QAAA,cACPL,IAAA,CAAChB,MAAM,EAAAqB,QAAA,cACHH,KAAA,CAACjB,MAAM,EAAAoB,QAAA,eACHL,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEf,IAAA,CAACX,MAAM,GAAE,CAAE,CAAE,CAAC,cAC7CW,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEf,IAAA,CAACV,MAAM,GAAE,CAAE,CAAE,CAAC,cAE7CY,KAAA,CAAChB,KAAK,EAAC4B,IAAI,CAAC,UAAU,CAACC,OAAO,cAAEf,IAAA,CAACG,cAAc,EAAAE,QAAA,cAACL,IAAA,CAACT,WAAW,GAAE,CAAC,CAAgB,CAAE,CAAAc,QAAA,eAC7EL,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,IAAI,CAACC,OAAO,cAAEf,IAAA,CAACR,OAAO,GAAE,CAAE,CAAE,CAAC,cACzCQ,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAEf,IAAA,CAACP,WAAW,GAAE,CAAE,CAAE,CAAC,EAC9C,CAAC,cAERO,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEf,IAAA,CAACG,cAAc,EAAAE,QAAA,cAACL,IAAA,CAACN,UAAU,GAAE,CAAC,CAAgB,CAAE,CAAE,CAAC,cAClFM,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEf,IAAA,CAACF,oBAAoB,GAAE,CAAE,CAAE,CAAC,cAC7DE,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEf,IAAA,CAACX,MAAM,GAAE,CAAE,CAAE,CAAC,EACnC,CAAC,CACL,CAAC,CACD,CAAC,CAE7B,CAEA,cAAe,CAAAwB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}