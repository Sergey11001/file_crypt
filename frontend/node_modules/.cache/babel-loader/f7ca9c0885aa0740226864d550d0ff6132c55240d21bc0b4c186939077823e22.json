{"ast":null,"code":"import{useState}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import useAuthStore from\"../stores/authStore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignIn(){var _location$state,_location$state$from;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const{signIn}=useAuthStore();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/storage/my';const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{const{success,error}=await signIn(email,password);if(success){navigate(from,{replace:true});}else{setError(error||'Failed to sign in');}}catch(err){setError('An unexpected error occurred');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"auth-title\",children:\"\\u0412\\u0445\\u043E\\u0434 \\u0432 FileCrypt\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"auth-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u041F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Вход...':'Войти'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-footer\",children:[\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"link\",state:{from},children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})]})]})});}","map":{"version":3,"names":["useState","Link","useNavigate","useLocation","useAuthStore","jsx","_jsx","jsxs","_jsxs","SignIn","_location$state","_location$state$from","email","setEmail","password","setPassword","error","setError","loading","setLoading","signIn","navigate","location","from","state","pathname","handleSubmit","e","preventDefault","success","replace","err","className","children","onSubmit","htmlFor","id","type","value","onChange","target","required","disabled","to"],"sources":["/home/sergey/univer/frontend/src/pages/SignIn.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport useAuthStore from \"../stores/authStore\"\n\nexport default function SignIn() {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const { signIn } = useAuthStore();\n    const navigate = useNavigate();\n    const location = useLocation();\n\n    const from = location.state?.from?.pathname || '/storage/my';\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError('');\n        setLoading(true);\n\n        try {\n            const { success, error } = await signIn(email, password);\n            if (success) {\n                navigate(from, { replace: true });\n            } else {\n                setError(error || 'Failed to sign in');\n            }\n        } catch (err) {\n            setError('An unexpected error occurred');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"auth-container\">\n            <div className=\"auth-card\">\n                <h1 className=\"auth-title\">Вход в FileCrypt</h1>\n\n                {error && <div className=\"error-message\">{error}</div>}\n\n                <form className=\"auth-form\" onSubmit={handleSubmit}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">Почта</label>\n                        <input\n                            id=\"email\"\n                            type=\"email\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                            required\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"password\">Пароль</label>\n                        <input\n                            id=\"password\"\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                            required\n                        />\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        className=\"btn btn-primary\"\n                        disabled={loading}\n                    >\n                        {loading ? 'Вход...' : 'Войти'}\n                    </button>\n                </form>\n\n                <div className=\"auth-footer\">\n                    Нет аккаунта?{' '}\n                    <Link to=\"/signup\" className=\"link\" state={{ from }}>\n                        Регистрация\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}